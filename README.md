# HHP
\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{makeidx}
\usepackage{ulem}
\usepackage{graphicx}
\usepackage{pythonhighlight}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\title{Guidelines of the Hydro Profile Processing(HPP) Program(2.0)}
\author{Chi Ding}

\begin{document}
\maketitle

\section{Introduction}
\

This program can only be used to process hydro profile generated by CLVisc. By using this program, the user of CLVisc can ignore the  format requirements of hydro profile. Those who will use the hydro profile can get the format by their own requirements by the program.
\

This is the new version, so it can only deal with the hydro profile with the initial condition generated by TRENTO, whose grid is  different from the ordinary. It's $NX$ and  $NY$ are even numbers, that means the grid will not get the $X$ and $ Y$ axis.
\
The default grid of the original hydro profile are given at the initial of the object.

\
\inputpython{HPP2.py}{26}{33}
%,keywordstyle=\color{blue!70}]
 The original hydro profile has 4 columns, the first columns is energy density ,the second to the fourth are flow velocity $v_x$,$v_y$,$v_\eta$. Each column can be reshape to $(NT,NX0,NY0,NZ0)$
%\inputpython{HPP.py}{23}{50}

\


As the unique point of TRENTO , $x_{min}$ becomes:
\inputpython{HPP2.py}{136}{139}
\



\section{Usage of this program}
This program has a standard command-line interface. The basic syntax is
\begin{python}
 python HPP.py [-h] --path PATH [--NX [NX]] [--NY [NY]] [--NZ [NZ]] [--DX [DX]]
              [--DY [DY]] [--DZ [DZ]] [-NE [EBE_N]] [-dim [DIM_SWITCH]]
              [-g [GRIDS_SWITCH]] [-ed [SED]] [-T [ST]] [-fqgp [SFRAC]]
              [-v [SV]] [-o [OUTPUTPATH]]
\end{python}
\newpage
One can get information by 

\begin{python}
python HPP.py -h 

optional arguments:
  -h, --help            show this help message and exit
  --path PATH           Give the root path for event by event;Give the file
                        pathe for 1 event
  --NX [NX]             NX, default = 70
  --NY [NY]             NY, default = 70
  --NZ [NZ]             NZ, default = 41
  --DX [DX]             DX, default = 0.3
  --DY [DY]             DY, default = 0.3
  --DZ [DZ]             DZ, default = 0.3
  -NE [EBE_N], --EBE_N [EBE_N]  Event number, default = 1
  -dim [DIM_SWITCH], --Dim_Switch [DIM_SWITCH]  Dim_Switch, default = 3,should be '2' or '3'
  -g [GRIDS_SWITCH], --Grids_Switch [GRIDS_SWITCH]  Grids, default = False
  -ed [SED], --sEd [SED] Energy, default = True
  -T [ST], --sT [ST]    Temperature, default = False
  -fqgp [SFRAC], --sFrac [SFRAC]   Fraction of QGP, default = False
  -v [SV], --sV [SV]    Velocity of flow, default = True
  -o [OUTPUTPATH], --OutPutPath [OUTPUTPATH] Out Put Path, default = The same with the origin Data

\end{python}
\subsection{The Format of the Outpu File}
There are 10 columns data that can be outputted.
\begin{python}
tau x y eta energy_density temperature fraction_of_QGP v_x v_y v_eta
\end{python}
Each columns's shape is (NT*NX*NY,1) for 2D or (NT*NX*NY*NZ,1) for 3D.
Each column can be output or not by changing the options. 
\subsection{ Options}

\subsubsection*{•\ \ \ \ $-$h,$--$help}
\ \ \ \ Show the help message and exit.
\subsubsection*{•\ \ \ \ $--$path}
\ \ \ \ Path to load the origin Hydro profile.This option is necessary. Notice that, if there is only one hydro profile need to be dealt with, this option must be assigned to the  path where the hydro profile is located. But if the hydro profiles are event by event, each file is in the folder 'event{\Large{\bf{i}}}',where {\Large{\bf{i}}}is the  event number. Then, the option '$--$path' should be assigned to the  path where these 'event{\Large{\bf{i}}}' located.
\subsubsection*{•\ \ \ \ $--$NX,$--$NY,$--$NZ,$--$DX,$--$DY,$--$DZ}
\ \ \ \ The default value of grids are the same with the origin hydro profile.
 \begin{python}
			NX=NY=70	NZ=41	DX=DY=DZ=0.3		
\end{python}
\subsubsection*{•\ \ \ \ $-$NE,$-$EBE\_N}
\ \ \ \ Total number of hydro profiles. The default value is 1.
\subsubsection*{•\ \ \ \ $-$dim,$--$Dim\_Switch}
Space dimension,which only can be set as 2 and 3. When it is assigned to 2, the information on transverse plan where $\eta_s = 0$, will be dealt with. If it is assigned to 2,the column of $\eta_s$ and $v_z$ will not be outputted by force. This option's default is 3.
\subsubsection*{•\ \ \ \ $-$g,$--$Grids\_Switch}
If option  is True,The Grids will be outputted.On the contrary, it will not. The default is False.
\subsubsection*{•\ \ \ \ $-$ed,$--$sEd;$-$T,$--$sT;$-$fqgp,$--$sFrac;$-$v,$--$sV}
Thes are the output switchs of energy density, temperature, fraction of QGP and flow velocity. Notice that,if the dimension is assigned to 2, $v_\eta$ will not be outputted.
The energy is given by the original hydro profile.The temperature is calculated  by EOS. \large{\bf{\uwave{The EOS package is the folder named 'eos',which should be locate with 'HHP.py' at the same path.}}}
\inputpython{HPP2.py}{247}{248}
The fraction is calculated by temperature. If the temperature is higher then 0.22 GeV, it is considered to be QGP. hadron. If it is lower then 0.18 GeV,it is considered to be  hadron.
\inputpython{HPP2.py}{115}{122}
\
The velocity come from the original hydro profile from column 1 to column 3.
Their defaults are:
\begin{python}
 	-ed True    -T False 	-fqgp False 	-v True
\end{python}

\subsubsection*{•\ \ \ \ $-$o,$--$OutputPath}
The default is 'None', that come to the output path is the same with the original file.

\subsection{Example}
\subsubsection{Use it to generate new hydro profile with new format}
There are 100 events at 
\begin{python}
/home/group/Hydroprofile/PbPb5020/10_2/

There 100 folders here:

event0/  event1/ event2/ event3/ event4/
   ...	   ...    ...    ...    ...
   ...	   ...    ...    ...    ...
event95/	event96/ event97/ event98/ event99/  
   
\end{python}
 If we want to get the 2D hydro profile, whose format is '$\tau$,x,y,$\epsilon$,T,fQGP,$v_x$,$v_y$'.
 we just need to execute:
 \begin{python}
	python HHP.py --path /home/group/Hydroprofile/PbPb5020/10_2/ \
	-NE 100 -dim 2 -g True -T True -fqgp True 
   
\end{python}
Then you will get 'new\_bulk2D.dat' in each folder.

IF you just want to get the 2D hydro profile for event0, you need to execute:
\begin{python}
	python HHP.py --path /home/group/Hydroprofile/PbPb5020/10_2/event0 \
	-dim 2 -g True -T True -fqgp True 
   
\end{python}
\subsubsection{Use the member functions to get the 3D specific point information }
\begin{python}
from HHP import HHP
		sample = HHP(path=data_path)
		result = sample.loc(t,x,y,z)
		#result[0] = energy density at (t,x,y,z)
		#result[1],result[2],result[3] = vx(t,x,y,z),vy(t,x,y,z),vz(t,x,y,z)
\end{python}
Notice that $t$ should conforming to $t=\tau_0+N\Delta\tau$, where $\tau_0 = 0.6\text{fm}$, $\Delta\tau=0.3\text{fm}$, $N $ must be positive integer with $N<\text{self.}NT$
\newpage
\subsubsection{ get the 2D specific point information at the transverse plan where $\eta_s = 0$ }

%\inputpython{HPP2.py}{85}{107}
%\inputpython{HPP2.py}{121}{125}
The same as 3D's.
 \begin{python}
from HHP import HHP
		sample = HHP(path=data_path)
		result = sample.loc2d(t,x,y)
		#result[0] = energy density at (t,x,y)
		#result[1],result[2] = vx(t,x,y,0),vy(t,x,y,0)
\end{python}
\subsection{postscript}
This is the $\alpha$ version. I will add more functions to it,such us support other initial condition,etc.

\subsection*{•}
\ \ \ \ There are some thing wrong when you open the code in sublime with indent.So you'd better open it with vim.
\
 
If there are some problem when you use it,please send e-mail to : \uline{dingchi2014@.mails.ccnu.edu.cn}
%\subsection{Use it directly to get new hydro profile as the required grids}
%\begin{python}
%python HHP.py path NX NY NZ DeltX DeltY DeltZ Event_number Dim_Switch
%\end{python}
%\
%If you want to calculate event by event, you should give the path to the root of those event. For example, there are 200 events at
%\begin{python}
% /home/data/pbpb5020/0_5/event0/
% \end{python}
%  The hydro profiles under the folder,event0,event1,etc. You should let 
%\begin{python}
% path = /home/data/pbpb5020/0_5/
%\end{python}
%And each hydro profile should  be place under event0, event1, etc and named as 'bulk3D.dat' It will return a new file 'new\_bulk3D.dat'(The default Dim\_Switch =3 ,which means it will return 3D hydro profile ). New file has 4 columns as the original one . Each column can be reshape to $(NT,NX,NY,NZ)$
% 
%\subsection{Get 2D hydro profile}
%If you set $Dim\_Switch = 2$, it will change 3D hydro profile to 2D. If you don't want to change the grids
% on the transverse plan, it will calculate faster without using interpolation method, which will be used if you change the grids.
%\subsection{Use the member functions to get the 3D specific point information }
%\
%\inputpython{HPP2.py}{56}{82}
%\inputpython{HPP2.py}{110}{117}
%Firstly, the object should be initialized. For example:
%\
%
%\begin{python}
%		sample = HHP(path=data_path)
%		result = sample.loc(t,x,y,z)
%		#result[0] = energy density at (t,x,y,z)
%		#result[1],result[2],result[3] = vx(t,x,y,z),vy(t,x,y,z),vz(t,x,y,z)
%\end{python}
%Notice that $t$ should conforming to $t=\tau_0+N\Delta\tau$, where $\tau_0 = 0.6\text{fm}$, $\Delta\tau=0.3\text{fm}$, $N $ must be positive integer with $N<\text{self.}NT$
%\newpage
%\subsection{ get the 2D specific point information at the transverse plan where $\eta_s = 0$ }
%
%\inputpython{HPP2.py}{85}{107}
%\inputpython{HPP2.py}{121}{125}
%The same as 3D's.
% \begin{python}
%		sample = HHP(path=data_path)
%		result = sample.loc2d(t,x,y)
%		#result[0] = energy density at (t,x,y)
%		#result[1],result[2] = vx(t,x,y,z),vy(t,x,y,z)
%\end{python}
%\subsection{postscript}
%This is the $\alpha$ version. I will add more functions to it,such us support other initial condition,etc.
%
\end{document}
